<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<body>

    <div th:fragment="modalFragments">

        <!-- =========================== -->
        <!--  TOAST NOTIFICATION (NEW)   -->
        <!-- =========================== -->
        <div id="toastNotification">
        </div>



        <!-- =========================== -->
        <!--       UNIVERSAL MODAL       -->
        <!-- =========================== -->
        <div id="universalModal">
            <!-- Inner content container -->
            <div id="modalContentContainer">
                <!-- Close Button -->
                <span id="closeUniversalModal" onclick="closeModal()">&times;</span>
                <!-- Content injected here -->
                <div id="injectedContent"></div>
            </div>
        </div>




        <!------------------------------------------------------ FILE MODALS------------------------------------------------------------->
        <template id="backupTemplate">
            <form id="createBackupForm" th:action="@{/create-backup}" onsubmit="registerPendingAction('backupCreated')">
                <h3 class="modal-text">Name your backup-file</h3>
                <div class="sidenote">(Any existing file with the same name will be replaced)</div>
                <br>
                <div class="modal-content-div">
                    <input type="text" placeholder="filename" name="name" required style="padding: 5px;">
                </div>
                <hr>
                <div class="modal-content-div">
                    <input class="btn" type="submit" value="Create Backup">
                    <a class="btn" href="#" onclick="closeModal()">Close</a>
                </div>
            </form>
        </template>

        <template id="saveTemplate">
            <div style="text-align: center;">
                <h3>Save Changes?</h3>
                <p>This will override the existing <b>Base.ruleset</b> file,<br>
                    even if you are currently working on a backup-file.</p>
                <br>
                <a class="btn" id="confirmSaveLink" th:href="@{/save}"
                    onclick="registerPendingAction('rulesetSaved')">Save</a>
                <a class="btn" href="#" onclick="closeModal()">Close</a>
            </div>
        </template>

        <!------------------------------------------------------ CHARACTER MODALS ------------------------------------------------------------->
        <template id="maxHpTemplate">
            <div style="text-align: center;">
                <h2>Are you sure?</h2>
                <span>This will set all characters HP to 99</span><br><br>
                <a class="btn" th:href="@{/maxhp}" onclick="closeModal();registerPendingAction('hpMaxed')">I am sure</a>
                <a class="btn" href="#" onclick="closeModal()">Nevermind</a>
            </div>
        </template>

        <template id="maxCardsTemplate">
            <div style="text-align: center;">
                <h2>Are you sure?</h2>
                <span>This will set all characters max <br>ability cards in battle to 20.</span><br><br>
                <a class="btn" th:href="@{/maxcards}" onclick="closeModal();registerPendingAction('cardsMaxed')">I am
                    sure</a>
                <a class="btn" href="#" onclick="closeModal()">Nevermind</a>
            </div>
        </template>


        <!------------------------------------------------------ ENABLE STARTERS ------------------------------------------------------------->

        <template id="enableAllTemplate">
            <i>*not all characters can be enabled safely yet</i><br>
            <b>Make the following characters available from start:</b>
            <div style="text-align: left; width: 400px; margin: 0 auto;">
                <ul>
                    <li>Pyroclast</li>
                    <li>Snowdancer</li>
                    <li>Frozen Fist</li>
                    <li>Trapper</li>
                    <li>Hive</li>
                </ul>
            </div>

            <span style="color: red; font-size: 14px;"><b>Warning</b><br>This is experimental and not extensively
                tested.
                Enabling new starting characters may cause the game to behave in unexpected ways, or lock you out of
                quests
                in the game. Use at your own discretion.</span><br><br>
            <a class="warning-btn btn" th:href="@{/enablecharacters}"
                onclick="closeModal();registerPendingAction('charactersEnabled')">I understand</a>
            <a class="btn" href="#" onclick="closeModal()">Nevermind</a>
        </template>


        <!------------------------------------------------------ ITEM MODAL ------------------------------------------------->

        <!-- 
        We define a generic form here. 
        The 'action' hidden input tells the controller WHAT to update. 
        The action input is defined by what button was clicked.

        The 'value' input is the new data.
        The value input is defined by the JS switch (which is also based on what button was clicked).
        -->
        <template id="itemFormTemplate">
            <h3 id="itemModalTitle">Set Value</h3>
            <form th:action="@{/set-item-value}" target="contentFrame" method="get">

                <!-- Corresponds to @RequestParam String action -->
                <input type="hidden" id="actionInput" name="action">

                <!-- Corresponds to @RequestParam String value -->
                <input id="itemModalInput" name="value" type="number" required>
                <hr>
                <input id="itemModalSubmitBtn" class="btn" type="submit" value="Apply">
            </form>
        </template>


    </div>
</body>

</html>